# -*- coding: utf-8 -*-
# @Time    : 11/24/22 4:39 PM
# @Author  : LIANYONGXING
# @FileName: utils.py
# @Software: PyCharm
import zhconv
import re

def text_filtering(line):
    """
    filtering raw text
    Args:
        line:
            raw text
    Returns:
            filtered text
    """
    line = str(line)
    line = line.strip()
    line = re.sub(r'@[\w.?!,]+', '', line)
    for k in emojis.keys():
        line = line.replace(k, emojis[k])
    line = re.sub(r'\[\w+\]', '', line)  # å»é™¤è¡¨æƒ…ï¼Œä¾‹å¦‚ï¼š[å¾®ç¬‘R]æˆ–è€…[æ³ª]
    line = line.replace("\xa0", '')  # å»é™¤\xa0
    line = re.sub(r'[^a-zA-Z0-9\u4e00-\u9fa5]', '', line).lower()  # å»é™¤é™¤äº†æ±‰å­—å¤§å°å†™å’Œæ•°å­—
    line = zhconv.convert(line, 'zh-cn')  # ç¹ä½“è½¬ç®€ä½“
    line = line[:(line+line).find(line, 1)] # å»é™¤å¾ªç¯å­—ç¬¦ä¸²
    return line


emojis = {"ğŸ’©": "å±",
          "ğŸ§ ": "è„‘å­",
          'ğŸ‘´': "çˆ·",
          'ãŠ—ï¸': "ç¥",
          'ğŸ·': "çŒª",
          'ğŸƒ': "å¶",
          'ğŸ–': "çŒª",
          'â¬†ï¸': "ä¸Š",
          'ğŸ§ ': "è„‘å­",
          'âš°ï¸': 'æ£ºæ',
          'ğŸ¸': 'è›™',
          "ğŸ‡¨ğŸ‡³": "ä¸­å›½",
          "ğŸ»": 'ç†Š',
          "ğŸˆ²ï¸": "ç¦",
          "â©": "åŠ é€Ÿ",
          "ğŸ¯": "èœ‚èœœ",
          "1âƒ£ï¸": "ä¸€",
          "7âƒ£ï¸": "ä¸ƒ",
          "ğŸ": "é©¬",
          "ğŸ´": "é©¬",
          "ğŸ”": 'é¸¡',
          "â¤ï¸": "å¿ƒ",
          "ğŸ‘": "èµ",
          "ğŸšª": "é—¨",
          "ğŸª–": "å†›ç›”",
          "ğŸ‡ºğŸ‡¸": "ç¾å›½",
          "ğŸ‡²ğŸ‡¾": "é©¬æ¥è¥¿äºš",
          "ğŸ‡¹ğŸ‡¼": "ä¸­åæ°‘å›½",
          "ğŸ‡¬ğŸ‡§": "è‹±å›½",
          "ğŸ‡©ğŸ‡ª": "å¾·å›½",
          "ğŸ‡¯ğŸ‡µ": "æ—¥æœ¬",
          "ğŸ‡¦ğŸ‡º": "æ¾³å¤§åˆ©äºš",
          "ğŸ‡°ğŸ‡·": "éŸ©å›½",
          "ğŸ‡°ğŸ‡µ": "æœé²œ",
          "ğŸ‡«ğŸ‡·": "æ³•å›½",
          "ğŸ‡ºğŸ‡¦": "ä¹Œå…‹å…°",
          "ğŸ‡·ğŸ‡º": "ä¿„ç½—æ–¯",
          "ğŸ‡¨ğŸ‡¦": "åŠ æ‹¿å¤§"
          }
